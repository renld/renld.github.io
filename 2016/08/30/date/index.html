<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>python 时间/高精度 | Leidar&#39;s Home</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="1&amp;gt;&amp;gt;&amp;gt; eval(repr(mpf(2.5)))">
<meta property="og:type" content="article">
<meta property="og:title" content="python 时间/高精度">
<meta property="og:url" content="http://renld.github.io/2016/08/30/date/index.html">
<meta property="og:site_name" content="Leidar's Home">
<meta property="og:description" content="1&amp;gt;&amp;gt;&amp;gt; eval(repr(mpf(2.5)))">
<meta property="og:updated_time" content="2016-08-30T03:32:12.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="python 时间/高精度">
<meta name="twitter:description" content="1&amp;gt;&amp;gt;&amp;gt; eval(repr(mpf(2.5)))">
  
    <link rel="alternative" href="/atom.xml" title="Leidar&#39;s Home" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/images.jpg">
  
  
  <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- 加载特效 -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet" />
  <script>
      var yiliaConfig = {
          fancybox: true,
          animate: true,
          isHome: false,
          isPost: true,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            
            <img lazy-src="/img/fan.jpg" class="js-avatar">
            
        </a>

        <hgroup>
          <h1 class="header-author"><a href="/">Renld</a></h1>
        </hgroup>

        
        
        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>毛遂自荐</li>
                        <li>按图索骥</li>
                        
                        <li>抛砖引玉</li>
                        
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">戳回老本营</a></li>
                        
                            <li><a href="/ZZPPP/index.html">中珠碰碰碰</a></li>
                        
                            <li><a href="/tagcloud.swf">这里有个球</a></li>
                        
                            <li><a href="http://blog.csdn.net/qq_32209643">曾经的回忆</a></li>
                        
                            <li><a href="/about">自述与留言</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fl github" target="_blank" href="https://github.com/renld" title="github">github</a>
                            
                                <a class="fl zhihu" target="_blank" href="https://www.zhihu.com/people/renld" title="zhihu">zhihu</a>
                            
                                <a class="fl mail" target="_blank" href="mailto:leidar100@gmail?subject=GithubBlog" title="mail">mail</a>
                            
                                <a class="fl wechat" target="_blank" href="/renld.github.io/wechat" title="wechat">wechat</a>
                            
                                <a class="fl rss" target="_blank" href="/atom.xml" title="rss">rss</a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <li><a href="/tags/C/" style="font-size: 12.86px;">C++</a></li> <li><a href="/tags/Computer/" style="font-size: 10px;">Computer</a></li> <li><a href="/tags/EE/" style="font-size: 11.43px;">EE</a></li> <li><a href="/tags/Highchart/" style="font-size: 10px;">Highchart</a></li> <li><a href="/tags/Life/" style="font-size: 17.14px;">Life</a></li> <li><a href="/tags/Linux/" style="font-size: 10px;">Linux</a></li> <li><a href="/tags/Macau/" style="font-size: 10px;">Macau</a></li> <li><a href="/tags/MongoDB/" style="font-size: 12.86px;">MongoDB</a></li> <li><a href="/tags/Semantic/" style="font-size: 11.43px;">Semantic</a></li> <li><a href="/tags/Tools/" style="font-size: 11.43px;">Tools</a></li> <li><a href="/tags/algorithm/" style="font-size: 14.29px;">algorithm</a></li> <li><a href="/tags/crawler/" style="font-size: 18.57px;">crawler</a></li> <li><a href="/tags/dataAnalysis/" style="font-size: 15.71px;">dataAnalysis</a></li> <li><a href="/tags/deep-learning/" style="font-size: 10px;">deep learning</a></li> <li><a href="/tags/django/" style="font-size: 12.86px;">django</a></li> <li><a href="/tags/git/" style="font-size: 10px;">git</a></li> <li><a href="/tags/hexo/" style="font-size: 10px;">hexo</a></li> <li><a href="/tags/html/" style="font-size: 18.57px;">html</a></li> <li><a href="/tags/machine-learning/" style="font-size: 17.14px;">machine learning</a></li> <li><a href="/tags/programer/" style="font-size: 10px;">programer</a></li> <li><a href="/tags/python/" style="font-size: 20px;">python</a></li> <li><a href="/tags/regular-expression/" style="font-size: 10px;">regular expression</a></li> <li><a href="/tags/vim/" style="font-size: 10px;">vim</a></li>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://alau.top">三金</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://terry.pub/">terry</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://sxkdz.org">sxkdz</a>
                    
                    </div>
                </section>
                

                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">Renld</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img lazy-src="/img/fan.jpg" class="js-avatar">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">Renld</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">戳回老本营</a></li>
                
                    <li><a href="/ZZPPP/index.html">中珠碰碰碰</a></li>
                
                    <li><a href="/tagcloud.swf">这里有个球</a></li>
                
                    <li><a href="http://blog.csdn.net/qq_32209643">曾经的回忆</a></li>
                
                    <li><a href="/about">自述与留言</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="github" target="_blank" href="https://github.com/renld" title="github">github</a>
                    
                        <a class="zhihu" target="_blank" href="https://www.zhihu.com/people/renld" title="zhihu">zhihu</a>
                    
                        <a class="mail" target="_blank" href="mailto:leidar100@gmail?subject=GithubBlog" title="mail">mail</a>
                    
                        <a class="wechat" target="_blank" href="/renld.github.io/wechat" title="wechat">wechat</a>
                    
                        <a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
                    
                </div>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap"><article id="post-date" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/08/30/date/" class="article-date">
      <time datetime="2016-08-30T01:44:03.000Z" itemprop="datePublished">2016-08-30</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      python 时间/高精度
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        

        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>eval(repr(mpf(<span class="number">2.5</span>)))</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="时间"><a href="#时间" class="headerlink" title="时间"></a>时间</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding: utf-8</span></span><br><span class="line"><span class="comment">#copyRight by heibanke</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 从现在开始1000天后和1000天前是哪一天</span></span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">a=datetime.date.today()</span><br><span class="line">b=datetime.datetime.now()</span><br><span class="line">d1=datetime.timedelta(days=<span class="number">1000</span>)</span><br><span class="line">d2=datetime.timedelta(hours=<span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line">(a-d1).isoformat()</span><br><span class="line">(a+d1).strftime(<span class="string">'%m/%d/%Y'</span>)</span><br><span class="line">b.isoformat()</span><br><span class="line">(b-d2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 离你的重要纪念日还有多少天</span></span><br><span class="line">important_day=datetime.datetime.strptime(<span class="string">'2008-06-18'</span>,<span class="string">'%Y-%m-%d'</span>) </span><br><span class="line"></span><br><span class="line">important_day&gt;b</span><br><span class="line">d3=b-important_day</span><br><span class="line">d3.days</span><br><span class="line"></span><br><span class="line">t=datetime.time(<span class="number">12</span>,<span class="number">11</span>,<span class="number">30</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 两段程序哪个快些</span></span><br><span class="line"><span class="comment">############## time.time and time.clock ####################</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">a=input(<span class="string">"please input 0 or 1:"</span>)</span><br><span class="line"></span><br><span class="line">start_time = time.time()</span><br><span class="line">start_clock = time.clock()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> a:</span><br><span class="line">    sum_i=<span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100000</span>):</span><br><span class="line">        sum_i+=i</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    sum_i=sum(range(<span class="number">100000</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> sum_i</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">end_time = time.time()</span><br><span class="line">end_clock = time.clock()</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"time-delta:"</span></span><br><span class="line"><span class="keyword">print</span> start_time-end_time</span><br><span class="line"><span class="keyword">print</span> <span class="string">"clock-delta:"</span></span><br><span class="line"><span class="keyword">print</span> start_clock-end_clock</span><br></pre></td></tr></table></figure>
<h1 id="高精度"><a href="#高精度" class="headerlink" title="高精度"></a>高精度</h1><p><a href="http://mpmath.org/doc/current/basics.html" target="_blank" rel="external">doc</a> </p>
<ol>
<li><strong>另外下面的浮点换成区间,就用iv</strong></li>
</ol>
<blockquote>
<p>The iv.mpf type represents a closed interval [a,b][a,b]; that is, the set {x:a≤x≤b}{x:a≤x≤b}, where aa and bb are arbitrary-precision floating-point values, possibly ±∞±∞. The iv.mpc type represents a rectangular complex interval [a,b]+[c,d]i[a,b]+[c,d]i; that is, the set {z=x+iy:a≤x≤b∧c≤y≤d}{z=x+iy:a≤x≤b∧c≤y≤d}.</p>
</blockquote>
<ol>
<li><p>低精度</p>
<blockquote>
<p> Fast low-precision arithmetic (fp)</p>
</blockquote>
</li>
</ol>
<h2 id="普通精度"><a href="#普通精度" class="headerlink" title="普通精度"></a>普通精度</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> decimal</span><br><span class="line">decimal.getcontext().prec=<span class="number">200</span> <span class="comment">#200数位精度</span></span><br><span class="line">a=decimal.Decimal(<span class="number">3</span>)**decimal.Decimal(<span class="number">123323</span>)</span><br><span class="line">b=decimal.Decimal(<span class="string">'0.13'</span>)**decimal.Decimal(<span class="string">'324325'</span>)</span><br><span class="line">print(<span class="string">'\t&#123;&#125;\n*\n\t&#123;&#125;\n=\n\t&#123;&#125;'</span>.format(a,b,a*b))</span><br></pre></td></tr></table></figure>
<h2 id="高精度-mpmath"><a href="#高精度-mpmath" class="headerlink" title="高精度(mpmath)"></a>高精度(mpmath)</h2><h3 id="对象类型"><a href="#对象类型" class="headerlink" title="对象类型"></a>对象类型</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> mpmath <span class="keyword">import</span> *</span><br><span class="line">sin(<span class="number">1</span>),cos(<span class="number">1</span>)</span><br><span class="line">mpf(<span class="number">1</span>) == sin(<span class="number">1</span>) ** <span class="number">2</span> + cos(<span class="number">1</span>) ** <span class="number">2</span></span><br><span class="line">mpf(<span class="string">"inf"</span>) <span class="comment">#浮点数</span></span><br><span class="line">mpc(<span class="number">2</span>,<span class="number">3</span>) <span class="comment">#复数</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 矩阵:</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mp.matrix([[<span class="number">1</span>,<span class="number">0</span>],[<span class="number">0</span>,<span class="number">1</span>]])</span><br><span class="line">matrix(</span><br><span class="line">[[<span class="string">'1.0'</span>, <span class="string">'0.0'</span>],</span><br><span class="line"> [<span class="string">'0.0'</span>, <span class="string">'1.0'</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_[<span class="number">0</span>,<span class="number">0</span>]</span><br><span class="line">mpf(<span class="string">'1.0'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="精度控制"><a href="#精度控制" class="headerlink" title="精度控制"></a>精度控制</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Mpmath settings:</span><br><span class="line">  mp.prec = <span class="number">53</span>                [default: <span class="number">53</span>] <span class="comment">#二进制</span></span><br><span class="line">  mp.dps = <span class="number">15</span>                 [default: <span class="number">15</span>] <span class="comment">#十进制</span></span><br><span class="line">  mp.trap_complex = <span class="keyword">False</span>     [default: <span class="keyword">False</span>]</span><br></pre></td></tr></table></figure>
<h3 id="不同规则"><a href="#不同规则" class="headerlink" title="不同规则"></a>不同规则</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mp2 = mp.clone()</span><br></pre></td></tr></table></figure>
<h3 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Setting the mp.pretty option will use the str()-style output for repr() as well:</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mp.pretty = <span class="keyword">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mpf(<span class="number">0.6</span>)</span><br><span class="line"><span class="number">0.6</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mp.pretty = <span class="keyword">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mpf(<span class="number">0.6</span>)</span><br><span class="line">mpf(<span class="string">'0.59999999999999998'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># The number of digits with which numbers are printed by default is determined by the working precision. To specify the number of digits to show without changing the working precision, use mpmath.nstr() and mpmath.nprint():</span></span><br><span class="line">    </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = mpf(<span class="number">1</span>) / <span class="number">6</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">mpf(<span class="string">'0.16666666666666666'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>nstr(a, <span class="number">8</span>)</span><br><span class="line"><span class="string">'0.16666667'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>nprint(a, <span class="number">8</span>)</span><br><span class="line"><span class="number">0.16666667</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>nstr(a, <span class="number">50</span>)</span><br><span class="line"><span class="string">'0.16666666666666665741480812812369549646973609924316'</span></span><br></pre></td></tr></table></figure>
<h3 id="基本功能"><a href="#基本功能" class="headerlink" title="基本功能"></a>基本功能</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>mp.fsum([mpf(<span class="string">'1.2'</span>),<span class="number">1</span>]) <span class="comment"># 加法</span></span><br><span class="line">mpf(<span class="string">'2.200000000012'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>fprod([<span class="number">1</span>, <span class="number">2</span>, <span class="number">0.5</span>, <span class="number">7</span>]) <span class="comment"># 乘法</span></span><br><span class="line">mpf(<span class="string">'7.0'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>fadd(<span class="number">2</span>, <span class="number">1e-20</span>, rounding=<span class="string">'u'</span>) <span class="comment"># 当然还有fsub </span></span><br><span class="line">mpf(<span class="string">'2.0000000000000004'</span>)</span><br><span class="line"><span class="comment"># Valid options are 'n' for nearest (default), </span></span><br><span class="line"><span class="comment"># 'f' for floor, 'c' for ceiling, 'd' for down, 'u' for up.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x, y = mpf(<span class="number">2</span>), mpf(<span class="string">'1e1000'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(x - y + y) <span class="comment">#把prec跳到5k也可以</span></span><br><span class="line"><span class="number">0.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(fsub(x, y, prec=inf) + y)</span><br><span class="line"><span class="number">2.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(fsub(x, y, exact=<span class="keyword">True</span>) + y)</span><br><span class="line"><span class="number">2.0</span></span><br><span class="line"></span><br><span class="line">fneg,fmul,fdiv,fmod,fabs</span><br><span class="line">sign</span><br><span class="line"></span><br><span class="line">re, im <span class="comment"># real\image part</span></span><br><span class="line">arg polar <span class="comment"># polar phase</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arg(<span class="number">-3j</span>)</span><br><span class="line"><span class="number">-1.5707963267949</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>polar(<span class="number">-2</span>)</span><br><span class="line">(<span class="number">2.0</span>, <span class="number">3.14159265358979</span>)</span><br><span class="line"><span class="comment">#旋转</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>chop(rect(<span class="number">2</span>, pi))</span><br><span class="line"><span class="number">-2.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 点乘</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>A = [<span class="number">2</span>, <span class="number">1.5</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>B = [<span class="number">1</span>, <span class="number">-1</span>, <span class="number">2</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>fdot(A, B)</span><br><span class="line">mpf(<span class="string">'6.5'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(zip(A, B))</span><br><span class="line">[(<span class="number">2</span>, <span class="number">1</span>), (<span class="number">1.5</span>, <span class="number">-1</span>), (<span class="number">3</span>, <span class="number">2</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>fdot(_)</span><br><span class="line">mpf(<span class="string">'6.5'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="高级eval"><a href="#高级eval" class="headerlink" title="高级eval"></a>高级eval</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>mpmathify(<span class="string">'3/4'</span>)</span><br><span class="line">mpf(<span class="string">'0.75'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mpmathify(<span class="string">'2+3j'</span>)</span><br><span class="line">mpc(real=<span class="string">'2.0'</span>, imag=<span class="string">'3.0'</span>)</span><br></pre></td></tr></table></figure>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/2016/08/30/date/">python 时间/高精度</a></p>
        <p><span>文章作者:</span><a href="/" title="访问 Renld 的个人博客">Renld</a></p>
        <p><span>发布时间:</span>2016年08月30日 - 09时44分</p>
        <p><span>最后更新:</span>2016年08月30日 - 11时32分</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2016/08/30/date/" title="python 时间/高精度">http://renld.github.io/2016/08/30/date/</a>
            <span class="copy-path" data-clipboard-text="原文: http://renld.github.io/2016/08/30/date/　　作者: Renld" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script src="/js/clipboard.min.js"></script>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" title="中国大陆 (CC BY-NC-SA 3.0 CN)" target = "_blank">"署名-非商用-相同方式共享 3.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



<nav id="article-nav">
  
    <a href="/2016/09/02/programming-pearls/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          编程珠玑 笔记
        
      </div>
    </a>
  
  
    <a href="/2016/08/24/shortCoding/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">短码之美</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>

    <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#时间"><span class="toc-number">1.</span> <span class="toc-text">时间</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#高精度"><span class="toc-number">2.</span> <span class="toc-text">高精度</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#普通精度"><span class="toc-number">2.1.</span> <span class="toc-text">普通精度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#高精度-mpmath"><span class="toc-number">2.2.</span> <span class="toc-text">高精度(mpmath)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#对象类型"><span class="toc-number">2.2.1.</span> <span class="toc-text">对象类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#精度控制"><span class="toc-number">2.2.2.</span> <span class="toc-text">精度控制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不同规则"><span class="toc-number">2.2.3.</span> <span class="toc-text">不同规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#输出"><span class="toc-number">2.2.4.</span> <span class="toc-text">输出</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#基本功能"><span class="toc-number">2.2.5.</span> <span class="toc-text">基本功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#高级eval"><span class="toc-number">2.2.6.</span> <span class="toc-text">高级eval</span></a></li></ol></li></ol></li></ol>
</div>
<input type="button" id="tocButton" value="Hide It"  title="点击按钮隐藏或者显示文章目录">

<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script>
    var valueHide = "Hide It";
    var valueShow = "Show It";

    if ($(".left-col").is(":hidden")) {
        $("#tocButton").attr("value", valueShow);
    }
    $("#tocButton").click(function() {
        if ($("#toc").is(":hidden")) {
            $("#tocButton").attr("value", valueHide);
            $("#toc").slideDown(320);
        }
        else {
            $("#tocButton").attr("value", valueShow);
            $("#toc").slideUp(350);
        }
    })
    if ($(".toc").length < 1) {
        $("#toc, #tocButton").hide();
    }
</script>







    
        <section id="comments">
  <div id="disqus_thread"></div>
    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'renld'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>
    



    <div class="scroll" id="post-nav-button">
        
            <a href="/2016/09/02/programming-pearls/" title="上一篇: 编程珠玑 笔记">
                <i class="fa fa-angle-left"></i>
            </a>
        
        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>
        
            <a href="/2016/08/24/shortCoding/" title="下一篇: 短码之美">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>
    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/09/12/class/">python class</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/11/function/">python函数式编程</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/07/python-passwords/">python2 passwords</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/07/python-list/">python2(HBK) 基本数据结构</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/04/ML-HBK/">机器学习 计算机视觉(黑板课)</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/04/ML-05/">机器学习(周志华) 05神经网络</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/04/ML-04/">机器学习(周志华) 04决策树</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/04/ML-03/">机器学习(周志华) 03线性模型</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/03/ML-02/">机器学习(周志华) 02模型评估与选择</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/02/ML-01/">机器学习(周志华) 01 绪论</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/02/programming-pearls/">编程珠玑 笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/30/date/">python 时间/高精度</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/24/shortCoding/">短码之美</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/23/From-Tomorrow-On/">From_Tomorrow_On</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/21/jpg/">爬取图片</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/19/PL4-final/">用 Django做图表 实现二手行情网站</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/17/PL4-3/">Semantic 框架做一个 Pinterest网站</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/17/GitLearn/">hexo debug && GitLearn</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/16/PL4-2/">python实战计划 Django 的模板语言</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/15/PL4-1/">python实战计划 用 Django 搭建简单网页</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/15/PL3-final/">python实战计划 分析二手商品行情</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/14/PL3-4/">python实战计划 聚合管道高效查找数据</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/12/vim/">vim Learning</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/12/PL3-3/">python实战计划 使用 find 函数</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/11/PL3-2/">python实战计划 简单的数据图表</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/11/PL3-1/">Python实战计划 如何让数据说话</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/10/PL2-final/">第二周实战作业：爬取一万商品数据</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/09/PythonChallenge/">PythonChallenge</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/09/RE/">regular expression</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/09/PL2-3/">Python实战计划 多进程抓取</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/08/Linux-01/">Linux私房菜 计算机概论</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/08/PL2-2/">Python实战计划 爬取大规模数据</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/07/PL2-1/">Python实战计划 Begining for MongoDB</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/07/PL1-final/">python实战计划 爬取商品数据</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/06/PL1-4/">python实战计划 动态数据爬取</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/06/PL1-3/">python实战计划 静态网页爬取</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/05/PL1-2/">python实战计划 爬取商品信息</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/05/PL1-1/">python实战计划 制作自己网页</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/05/HFPy/">python file</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/22/greedy/">Greedy & Violent</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/09/byefresh/">BYE Freshman</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/04/egt1/">Primary Engineering Practice</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/03/Algor-Water/">GoodBye Big Algorithm Waterer</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/25/treeDP/">DP in Tree</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/25/EEreview/">EEreview</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/20/part_list/">块状链表</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/19/sdii/">SDII_FUN</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/15/By-the-Year/">By The Year</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/13/STL-LEARN/">Notes for STL</a></li></ul>
    <script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
    <script>
        $(".post-list").addClass("toc-article");
        $(".post-list-item a").attr("target","_blank");
        $("#post-nav-button > a:nth-child(2)").click(function() {
            $(".fa-bars, .fa-times").toggle();
            $(".post-list").toggle(300);
            if ($(".toc").length > 0) {
                $("#toc, #tocButton").toggle(200, function() {
                    if ($(".switch-area").is(":visible")) {
                        $("#tocButton").attr("value", valueHide);
                        }
                    })
            }
            else {
            }
        })
    </script>



    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2016 Renld
            </div>
            <div class="footer-right">
                <div><p>Config Your VPN To Open Disqus Comment</p></div>
            </div>
        </div>
        
    </div>
</footer>

    </div>
    <script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>

    <script>
        $(document).ready(function() {
            var backgroundnum = 8;
            var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>





<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <script language="javascript">
    $(function() {
        $("a[title]").each(function() {
            var a = $(this);
            var title = a.attr('title');
            if (title == undefined || title == "") return;
            a.data('title', title).removeAttr('title').hover(

            function() {
                var offset = a.offset();
                $("<div id=\"anchortitlecontainer\"></div>").appendTo($("body")).html(title).css({
                    top: offset.top - a.outerHeight() - 15,
                    left: offset.left + a.outerWidth()/2 + 1
                }).fadeIn(function() {
                    var pop = $(this);
                    setTimeout(function() {
                        pop.remove();
                    }, pop.text().length * 800);
                });
            }, function() {
                $("#anchortitlecontainer").remove();
            });
        });
    });
</script>


  </div>
</body>
</html>